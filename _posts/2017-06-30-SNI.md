---
layout: post
title:  "SNI"
categories: [SNI]
tags: [SNI]
description: SNI
---

# SNI

## Server Name Indication

SNI는 Server Name Indication 약자고 TLS 프로토콜의 확장판으로 핸드쉐이킹 시작할 때 브라우저와 어떤 호스트명이 연결되는지를 나타낸다.

SNI는 서버가 여러 인증서를 동일한 IP와 동일한 TCP 포트에 제공할 수 있어서 모든 사이트들이 같은 인증서를 사용할 필요가 없이 같은 IP에서 여러 보안 웹사이트를 운용할 수 있다.

TLS 커넥션 맺을 때 클라이언트는 디지털 인증서를 웹서버로 요청한다. 그러면 서버가 인증서를 보내면, 클라이언트는 인증서를 검증하고 인증서에 있는 이름과 연결하고자하는 서버이름이 맞는지 비교한다.

일치하면 커넥션이 정상적으로 진행되고, 일치하지 않으면 유저는 차이를 경고 받고 man-in-the-middle 공격시도를 나타낼 수 있기 때문에 커넥션이 중단한다.

IP주소는 제한적이므로, 모든 웹사이트가 자신의 IP 주소를 할당하려는 것은 장기적으로 문제가 발생할 수 있고, SNI는 이 문제를 해결할 수 있다.

SNI를 지원하는 브라우저는 방문자가 보안 연결을 초기화하는 동안 연결하고자 하는 웹 사이트의 이름을 즉지 전달하므로 서버는 다시 보낼 인증서를 알게 된다.

구 버전 브라우저는 SNI를 지원하지 않는 것도 있다.

SNI를 사용하기 위해서는 애플리케이션에서의 SSL/TLS 라이브러리가 SNI를 지원해야 하고, 애플리케이션은 SSL/TLS 라이브러리에 호스트명을 제출해야 한다.
대부분의 브라우저는 SNI를 아직 지원하지 않는데 최신 웹브라우저나 SSL/TLS 라이브러리는 이미 SNI를 지원한다.
