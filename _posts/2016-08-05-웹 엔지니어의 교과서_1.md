---
layout: post
title: 웹 엔지니어의 교과서[1]
categories:
  - Java
tags:
  - Study
description: BOOK, STUDY
---
# 1장. 웹 엔지니어

## Front-End에서의 MVC

MVC는 원래 서버사이드에서 주로 사용하던 설계 방식이지만, 프런트 엔드에서도 MVC 방식을 이용할 수 있다!

주로 `AngularJS`나 `Backbone.js`가 대두되고 있다.

또한 JQuery로 프론트엔드를 작성하면 DOM의 변경에 약하게 되는데, 앞서 말한 두개와 같은 프레임워크를 사용하면 DOM 탐색이 줄어드므로, DOM의 변경에 강하다

AngularJS를 써 본 경험으로는 확실히 DOM의 변경에 영향을 받지 않는다. 하지만 그만큼의 체계적인 JS 구조의 설계가 필요하다. 또한 HTML 코드가 읽기 더 어려워 질 수 있다.(처음 보는 사람들에게는)

## Fluentd

** 로그를 다루는 방법 **

#### Scale-Out 한 서버들의 로그를 한데 모아서 볼 수 없을까?

** 로그 수집 도구 Fluent를 이용하면 쉽게 해결할 수 있다. **

#### 기타 로그 수집 도구

1. Fluent (책에서 소개하는 것)
2. ELKR(ElasticSearch + Logstash + Kibana + Redis) 를 이용한 로그분석 환경 구축
3. Hadoop + Mongo DB
4. 자체 로그 환경 구축

#### Fluent

여러 대의 서버에 흩어져 있는 로그를 실시간으로 특정 서버로 모을 수 있다.

#### ELKR

>초기에 크지 않은 비용으로 간단하게 로그분석 환경구축을 하고, 이후 서비스가 성장하면서 시스템이 커질 경우 비교적 용이하게 Scale Out 해 나갈 수 있는 ElasticSearch와 Redis를 이용해서 로그 분석 시스템을 구성하는 방법

![https://cdn-images-1.medium.com/max/1000/0*3IVc3S_LAyPsc8-G.png](https://cdn-images-1.medium.com/max/1000/0*3IVc3S_LAyPsc8-G.png)

1. Nginx 는 각각의 물리적인 3대의 서버에서 구동된다고 가정합니다.
2. 각 서버에는Nginx의 로그를 수집하기 위한 Logstash가 동작합니다.
3. 다량의 로그가 빠르게 쌓일 경우를 대비해 Redis를 중간데이터 수집 Queue로 사용 합니다.
4. Redis에 쌓인 로그들을 ElasticSearch에 적재하는 Indexer Logstash가 동작하면서 Redis로그를 ElasticSearch로 적재합니다.
5. 적재된 로그들은 Kibana와 SQL 플러그인 등으로 Visualization & 분석 할 수 있습니다.

참고 : https://medium.com/chequer/elkr-elasticsearch-logstash-kibana-redis-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%A1%9C%EA%B7%B8%EB%B6%84%EC%84%9D-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0-f3dd9dfae622

#### 하둡 + 몽고 DB

## 가상화 기술

`Vagrant`나 `Docker`, `VMware`등의 기술로 환경구축을 자동화 하는 방법이다.

### 서버 가상화 기술이란?

#### 기존에는...

예전의 물리 서버 환경에서 네트워크 관리자는 하나의 애플리케이션에 하나의 서버를 할당함

* 네트워크 구성 용이, 문제 원인 쉽게 발견
* But. CPU 100% 활용 불가, 물리적 공간의 급증, 전력 소모

#### 서버 가상화의 등장

**하나의 물리 서버를 여러개의 가상 머신으로 전환, 각각의 가상 서버는 마치 독립적인 물리 서버처럼 동작**

자체 운영시스템 구동 가능하므로, 최대한 활용가능한 만큼의 가상서버들을 생성 가능하다.
* 물리적, 논리적 공간을 줄일 수 있다.
* 물리서버의 추가 없이 Redundancy를 확보할 수 있다.
* 프로그래머의 독립성을 보장한다.

### 가상화 기술

1. 전가상화
2. 반가상화
3. OS레벨 가상화

#### 전가상화

**하이퍼바이저(Hypervisor)를 사용한 완전 가상 서버 독립**

> 하이퍼바이저는 물리 서버의 CPU와 디스크에 직접 상호작용을 하며, 가상 서버의 운영체제를 위한 플랫폼 역할을 한다.
>
> 하이퍼바이저는 각각의 가상 서버들을 완전히 독립적으로 운용토록 한다. 각각의 게스트 서버는 자체 OS에서 운영되기 때문에, 리눅스 기반 게스트와 윈도우즈 기반 게스트를 동시에 운용할 수도 있다.
>
> 하이퍼바이저는 물리 서버의 자원을 모니터링하여, 가상 서버에서 애플리케이션이 구동될 때, 물리 서버의 자원을 적절한 가상 서버에 할당해 준다.
>
> 물론 하이퍼바이저 자체 구동을 위해서도 처리능력 등의 리소스를 필요로 하기 때문에, 하이퍼바이저의 리소스 사용량은 전체 서버 퍼포먼스와 애플리케이션 구동속도에 영향을 줄 수 있다.


#### 반가상화

**게스트 서버 간의 독립성 없이 상호작용 할 수 있는 기술**

> 게스트 서버 간의 독립성 없이 상호작용한다. 반가상화 하이퍼바이저는 게스트 운영체제를 관리하기 위해 필요한 자원(처리능력)이 상대적으로 적게 든다.
>
> 이는 각각의 OS가 동일한 물리 서버에서 운영되는 다른 운영체제에서 필요로 하는 자원을 이미 인지하고 있으며, 이들 시스템은 마치 하나처럼 동작하게 된다.


#### OS 레벨 가상화

> 하이퍼바이저를 사용하지 않는 대신, 가상화 기능이 호스트 OS에 포함되어 있다. 호스트 OS의 가상화에는 전가상화의 하이퍼바이저의 모든 기능들이 포함된다. 다만 게스트 서버는 반드시 동일한 OS를 구동해야 한다는 한계가 존재한다. >
> 각각의 가상 서버는 독립적이지만, 다른 종류의 OS를 복합적으로 사용할 수 없으므로 이러한 환경을 균일 환경(homogeneous environment)이라 한다.

## 프로비저닝 기술

**사용자의 요구에 맞게 시스템 자원을 할당, 배치, 배포해 두었다가 필요 시 시스템을 즉시 사용할 수 있는 상태로 미리 준비해 두는 것**

**무엇인가 여럿 중에 최적인 것을 찾기 위해 필요한 지식을 미리 준비해놓고 요청에 맞게 공급하는 절차와 행위를 말한다.
즉, 미리 정의된 정책이나 서비스를 사용자에게 지원해주는 것을 말한다.**

필요한 라이브러리와 미들웨어를 설치하고 원하는 서버 상태로 만드는 것.

Chef나 Ansible과 같은 도구를 사용하면 편리하다.

여러대의 서버를 한꺼번에 처리할 수 있으므로, 서버간 불일치를 막을 수 있다.

### 프로비저닝 종류

#### 서버 자원 프로비저닝
서버의 CPU, Memory 등의 자원을 할당 또는 적절하게 배치해서 운영할 수 있도록 준비해 놓는 것을 서버 자원 프로비저닝이라 한다.

#### OS 프로비저닝
OS를 서버에 설치하고, 구성 작업을 해서 OS가 기동되도록 준비해 놓는 것을 OS 프로비저닝이라 한다.

#### 소프트웨어 프로비저닝
소프트웨어 ( WAS, DBMS, Application )을 시스템에 설치/배포하고 필요한 구성 세팅 작업을 해서 실행할 수 있도록 해 놓는 것을 소프트웨어 프로비저닝이라고 한다.

#### 계정 프로비저닝
신입 사원이 입사하거나 조직 내에서 인사 이동을 하거나 직무변경이 발생해 사용자가 접근하는 자원의 범주가 변경되었을 때 HR담당자와 IT관리자는 승인절차를 밟은 후, 다양한 애플리케이션에 필요한 계정을 생성하거나 접근권한을 변경해주는데 이러한 일련의 과정을 계정 프로비저닝이라고 한다.

#### 스토리지 프로비저닝
낭비되거나 사용되지 않는 스토리지를 식별하고 공통 풀에 가져다 놓을 수 있다. 이후 스토리지에 대한 요구가 접수되면 관리자는 이 공통 풀에서 스토리지를 꺼내 사용할 수 있기에 스토리지의 효율을 높일 수 있다.



# 참고 사이트

http://d2.naver.com/helloworld/1016
http://itxcloud.tistory.com/127
